
<!DOCTYPE html>
<html>
<head>
    <title>ToDo Dashboard</title>
</head>
<body>
    <h1>Welcome to Your ToDo Dashboard {{user.email}}</h1>
    <h2>Your Todos</h2>
    <ul>
        <!-- Display the user's todos here -->
        {% for todo in todos %}
            <li>
              {% if todo.complete == True %}
                <strike>{{todo.title}}</strike>
              {% else %}
                <span>{{todo.title}}</span>
              {% if todo.user.id == user.id %}
                <a href="{% url 'updatetodo' todo.id %}">Update</a>
              {% endif %}
              {% comment %} <a href="{% url 'complete_todo' todo.id %}">Mark Complete</a>
              {%if todo.complete == True%}
                <strike>
                  {{ todo.title }} - {{ todo.description }} - Assigned To: {% if todo.user %}{{ todo.user.email }}{% else %}Not Assigned{% endif %} - {% if todo.complete %}(Completed){% endif %}
                </strike>
                {%else%}
                <span>
                  {{ todo.title }} - {{ todo.description }} - Assigned To: {% if todo.user %}{{ todo.user.email }}{% else %}Not Assigned{% endif %} - {% if todo.complete %}(Completed){% endif %}
                </span> {% endcomment %}
                {% comment %} {% if not todo.complete and todo.user == user  %} {% endcomment %}
                    
                {% endif %}
                {% if todo.user == user %}
                    <a href="{% url 'delete' todo.id %}">Delete</a>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
    <h2>Add Todo</h2>
    <form method="post" action= "{% url 'todo' %}">
        {% csrf_token %}
        <label for="title">Title:</label>
        <input type="text" name="title" required><br>

        <label for="description">Description:</label><br>
        <textarea name="description" required></textarea><br>

        <label for="assigned_to">Assign To:</label>
        <select name="user">
            <option value="" selected>Not Assigned</option>
                <option value="{{ user.id }}">{{ user.email }}</option>
        </select><br>
        
        <input type="submit" value="Add Todo">
    </form>
    <a href="{% url 'logout' %}">Logout</a>
</body>
</html>













{% comment %} <h1>Welcome, {{ request.user.email }}!</h1>
<h2>Your Todos:</h2>
<ul>
  {% for todo in todos %}
    <li>{{ todo.title }} {% if todo.completed %}(Completed){% endif %}</li>
  {% endfor %}
</ul> {% endcomment %}



{% comment %} <h1>To Do App</h1>
<!-- templates/dashboard.html -->
{% if user.is_authenticated %}
  <h1>Welcome, {{ user.email }}!</h1>
  <ul>
    {% for todo in todos %}
      <li>{{ todo.title }}</li>
    {% endfor %}
  </ul>
{% else %}
  <h1>You are not logged in.</h1>
  <a href="{% url 'tasks:login' task.id %}">Login</a>
  <p>"Don't have an account?"</p>
  <a href="{% url 'tasks:register' task.id %}">Register</a>

{% endif %} {% endcomment %}
